### 性能体系建立
* 现状评估和建立指标
* 技术方案
* 执行开发
* 结果评估和监控(一切用数据说话)

##### 性能方面借鉴前人业务中实践的结论，分为几个重要的点：
* 页面加载性能   
* 动画与操作性能
* 内存、电量消耗
* 计算速度(大批量前端数据计算)
* 渲染速度(大批量node渲染)

###### 其中页面加载性能
* 当加载时间低于一定时间，用户感觉差别不大，经前人分东西大约是1s
* 少数超长时间加载的用户(2G等)会影响整体平均打开时间，不能反映大多数用户真实现象       
于是有一个新指标的产出  **秒开率** 即疫苗树脂内打开的用户占总量的百分比
>前人分析用户数据后，页面加载性能跟用户流失率有很强的关联性， 而用户流失率正式公司业务非常看重的指标  

技术方案
* 缓存
   * 客户端控制的缓存策略
* 减少请求成本
   * TCP/TLS连接复用：由服务端升级到HTTP2，尽量合并域名
* 减少请求数
   * js、CSS打包到HTML
   * 用js控制图片异步加载和懒加载
   小型图片使用data-uri
* 减少传输体积
   * 尽量使用svg/gradient代替图片
   * 根据机型和网络状况控制图片清晰度
   * 低清晰度图片使用锐化提升视觉体验
   * 避免大型背景图
![](https://static001.geekbang.org/resource/image/6b/f2/6b5051c452af8c3db5fbb8ba6b9e34f2.jpg)
